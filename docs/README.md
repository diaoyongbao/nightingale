# 夜莺监控(Nightingale)项目分析文档

## 文档概述

本文档集对夜莺监控(Nightingale)项目进行了全面深入的分析,旨在帮助开发者快速理解项目架构、进行二次开发和功能扩展。

## 文档目录

### 1. [项目概览](./01-项目概览.md)

**内容概要**:
- 项目简介和核心定位
- 技术栈详解(前后端)
- 项目结构和目录组织
- 核心模块介绍
- 部署架构说明
- 关键特性列表
- 数据库设计概览
- API设计概览

**适合人群**: 所有开发者,特别是初次接触项目的开发者

**阅读时间**: 约30分钟

---

### 2. [后端架构详解](./02-后端架构详解.md)

**内容概要**:
- 整体架构和分层设计
- Center模块(中心服务)详解
- Alert模块(告警引擎)详解
- PushGW模块(推送网关)详解
- Models模块(数据模型)详解
- Memsto模块(内存缓存)详解
- 数据流分析
- 数据库设计
- 配置系统
- 权限系统
- 性能优化策略
- 扩展点说明

**适合人群**: 后端开发者,架构师

**阅读时间**: 约60分钟

**前置知识**: Go语言基础,Gin框架,GORM

---

### 3. [前端架构详解](./03-前端架构详解.md)

**内容概要**:
- 技术选型和整体架构
- 目录结构详解
- 应用入口和全局状态管理
- 路由系统设计
- 服务层封装
- 核心页面分析
  - 告警规则管理
  - 仪表盘
  - 数据探索
- 公共组件设计
- 状态管理方案
- 国际化实现
- 主题系统
- 性能优化技巧
- 插件系统
- 构建和部署

**适合人群**: 前端开发者,UI/UX开发者

**阅读时间**: 约60分钟

**前置知识**: React基础,TypeScript,Ant Design

---

### 4. [二次开发指南](./04-二次开发指南.md)

**内容概要**:
- 开发环境搭建
  - 后端环境配置
  - 前端环境配置
- 后端二次开发
  - 添加新的API接口
  - 添加新的数据源支持
  - 添加新的通知渠道
  - 添加事件处理器
- 前端二次开发
  - 添加新页面
  - 添加新组件
  - 添加自定义Hook
  - 国际化支持
- 插件开发
- 测试方法
- 调试技巧
- 性能优化
- 部署方案

**适合人群**: 需要进行二次开发的开发者

**阅读时间**: 约90分钟

**前置知识**: 已阅读架构详解文档

---

### 5. [数据库设计详解](./05-数据库设计详解.md)

**内容概要**:
- 数据库概览
- 核心表结构详解
  - 用户权限表
  - 业务组织表
  - 告警规则表
  - 通知管理表
  - 监控对象表
  - 数据源表
  - 仪表盘表
- 索引设计
- 数据迁移
- 查询优化
- 事务处理
- 配置表
- 数据备份与恢复
- 性能监控
- 最佳实践

**适合人群**: 后端开发者,DBA

**阅读时间**: 约45分钟

**前置知识**: SQL基础,MySQL/PostgreSQL

---

### 6. [API接口文档](./06-API接口文档.md)

**内容概要**:
- API概览和认证方式
- 用户管理API
- 业务组API
- 告警规则API
- 告警事件API
- 数据源API
- 数据查询API
- 仪表盘API
- 监控对象API
- 通知管理API
- 服务API
- 错误码说明
- 最佳实践

**适合人群**: 前后端开发者,集成开发者

**阅读时间**: 约45分钟

**用途**: API参考手册

---

## 快速导航

### 按角色导航

#### 项目经理/架构师
1. 阅读 [项目概览](./01-项目概览.md) 了解整体情况
2. 阅读 [后端架构详解](./02-后端架构详解.md) 和 [前端架构详解](./03-前端架构详解.md) 了解技术架构

#### 后端开发者
1. [项目概览](./01-项目概览.md) → [后端架构详解](./02-后端架构详解.md) → [数据库设计详解](./05-数据库设计详解.md)
2. 需要开发时参考 [二次开发指南](./04-二次开发指南.md)
3. 需要调用API时参考 [API接口文档](./06-API接口文档.md)

#### 前端开发者
1. [项目概览](./01-项目概览.md) → [前端架构详解](./03-前端架构详解.md)
2. 需要开发时参考 [二次开发指南](./04-二次开发指南.md)
3. 需要调用API时参考 [API接口文档](./06-API接口文档.md)

#### 全栈开发者
按顺序阅读所有文档

#### 运维/DBA
1. [项目概览](./01-项目概览.md)
2. [数据库设计详解](./05-数据库设计详解.md)

### 按任务导航

#### 了解项目
→ [项目概览](./01-项目概览.md)

#### 搭建开发环境
→ [二次开发指南 - 开发环境搭建](./04-二次开发指南.md#1-开发环境搭建)

#### 添加新功能
→ [二次开发指南](./04-二次开发指南.md)

#### 调用API
→ [API接口文档](./06-API接口文档.md)

#### 数据库操作
→ [数据库设计详解](./05-数据库设计详解.md)

#### 性能优化
→ [后端架构详解 - 性能优化](./02-后端架构详解.md#7-性能优化)
→ [前端架构详解 - 性能优化](./03-前端架构详解.md#7-性能优化)

#### 部署上线
→ [二次开发指南 - 部署](./04-二次开发指南.md#8-部署)

## 项目关键信息

### 技术栈总览

**后端**:
- 语言: Go 1.24.0
- 框架: Gin
- ORM: GORM
- 数据库: MySQL/PostgreSQL/SQLite
- 缓存: Redis
- 消息队列: Kafka

**前端**:
- 框架: React 17.0.0
- 构建: Vite 4.5.14
- UI: Ant Design 4.21.0
- 路由: React Router DOM 5.2.0
- 语言: TypeScript 4.9.4

### 核心模块

1. **Center** - 中心服务,提供Web界面和API
2. **Alert** - 告警引擎,负责规则评估和事件生成
3. **PushGW** - 推送网关,接收监控数据
4. **Edge** - 边缘引擎,边缘机房部署

### 数据库表数量

- 核心表: 40+ 张
- 主要分类: 用户权限、业务组织、告警规则、通知管理、监控对象、数据源、仪表盘等

### API数量

- 页面API: 200+ 个
- 服务API: 50+ 个
- Agent API: 10+ 个

## 贡献指南

### 文档更新

如果发现文档有误或需要补充,请:

1. 在对应文档中直接修改
2. 提交Pull Request
3. 说明修改原因

### 文档规范

- 使用Markdown格式
- 代码块指定语言
- 添加适当的标题层级
- 包含示例代码
- 保持中文表述清晰

## 相关资源

- **官方文档**: https://flashcat.cloud/docs/
- **GitHub仓库**: https://github.com/ccfos/nightingale
- **前端仓库**: https://github.com/n9e/fe
- **社区论坛**: https://github.com/ccfos/nightingale/discussions
- **问题反馈**: https://github.com/ccfos/nightingale/issues

## 版本信息

- **文档版本**: 1.0.0
- **项目版本**: v8.5.0
- **更新日期**: 2026-01-05

## 许可证

本文档遵循 Apache License 2.0 许可证

---

## 附录

### 常用命令

```bash
# 后端开发
go run cmd/center/main.go -configs etc

# 前端开发
npm run dev

# 构建后端
make build

# 构建前端
npm run build

# 数据库迁移
mysql -u root -p n9e < docker/initsql/a-n9e.sql
```

### 常用配置

```toml
# etc/server.conf
[DB]
DSN = "root:password@tcp(127.0.0.1:3306)/n9e?charset=utf8mb4"

[Redis]
Address = "127.0.0.1:6379"

[HTTP]
Port = 8765
```

### 常见问题

**Q: 如何快速上手?**
A: 先阅读项目概览,然后根据角色阅读对应的架构详解文档

**Q: 如何添加新功能?**
A: 参考二次开发指南,根据需求选择后端或前端开发章节

**Q: 如何调试?**
A: 参考二次开发指南中的调试技巧章节

**Q: 性能问题如何优化?**
A: 参考架构详解文档中的性能优化章节

---

**文档维护**: 本文档集由项目分析生成,建议定期更新以保持与项目同步。
